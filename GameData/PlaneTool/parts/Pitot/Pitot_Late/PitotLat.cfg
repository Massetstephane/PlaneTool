// ---- Pitot tube by MASSET stephane WIP
// ---- GNU GENERAL PUBLIC LICENSE Version 3, 29 June 2007
// ---- If one day i try to program c+ module i do a real pitot function
// ---- Compiled with 1.12 partools
// ---- 13/01/2022 update with B9PartSwitch to choose sensor type
// ---- Added module variant part to switch left right sensor flag
//      (B9PartSwich sensor not working with two modules)	
//		
PART
{
	name = PitoTubeLat
	module = Part
	author = Masset stephane
	//
	scale = 1
	rescaleFactor = 1
	//
	node_stack_bottom = 0.0, 0.0, 0.0, -1.0, 0.0, 0, 0
	node_attach = 0.0, -0.03, 0.0, 0.0, -1.0, 0.0, 0
	//
	TechRequired = aerodynamicSystems
	entryCost = 100
	cost = 300
	category = Science
	subcategory = 0
	title = #PitotNose_5
	manufacturer = #PitotNose_2
	description = #PitotNose_3
	attachRules = 1,1,0,0,1
	mass = 0.005
	dragModelType = default
	maximum_drag = 0.02
	minimum_drag = 0.02
	angularDrag = 1
	crashTolerance = 10
	maxTemp = 2000 // = 3000
	explosionPotential = 0.1
	bulkheadProfiles = size0, surf
	thermalMassModifier = 2.0
	emissiveConstant = 0.50
	tags = #PitotNose_4

	//
	MODEL
	{
		model = PlaneTool/Parts/Pitot/Assets/PitotNose_Lat
	}
	
	// ---- It's not the real function but it's a start ----
	// Testing B9PartSwitch mod to change module functions
	// test on ModuleEnviroSensor switch -> sensorType seem ok
	// test on ModuleScienceExperiment switch -> experimentID not working

	// switch sensor and flag type
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = Sensor
		switcherDescription = Sensors Variants
		switchInFlight = False
		uiGroupName = Sensor Variant
		uiGroupDisplayName = Sensor Variant Pitot choice

		SUBTYPE
		{
			name = Blank
			title = PITOT(noSensor)
			primaryColor = Amber
			secondaryColor = Grey
			descriptionSummary = Nosensor
			descriptionDetail = Part without sensor just for visual things.

			TEXTURE
			{
				texture = PlaneTool/Parts/Pitot/Assets/Blank
				shaderProperty = _MainTex
				transform = IndicatorL
				transform = IndicatorR
			}
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnviroSensor
				}
				moduleActive = false
			}
		}

		SUBTYPE
		{
			name = ACC
			title = ACC (seismic activity)
			primaryColor = DarkNavyBlue
			secondaryColor = Grey
			descriptionSummary = Sensor ACC
			descriptionDetail = This device contains an extremely sensitive acceleration sensor, which when properly settled on a firm surface, will detect and record accurate seismic activity data. The accelerometer will still function while flying, so the Double-C can also be used to measure accelerations during flight. Warranty void if shaken or exposed to vacuum.
			
			TEXTURE
			{
				texture = PlaneTool/Parts/Pitot/Assets/IndiceACC
				shaderProperty = _MainTex
				transform = IndicatorL
				transform = IndicatorR
			}

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnviroSensor
				}
				DATA
				{
					sensorType = ACC
				}
			}
		}

		SUBTYPE
		{
			name = PRES
			title = PRES (atmospheric P)
			primaryColor = CobaltBlue
			secondaryColor = Grey
			descriptionSummary = Sensor PRES
			descriptionDetail = A device for measuring the local atmospheric pressure. Warranty
			
			TEXTURE
			{
				texture = PlaneTool/Parts/Pitot/Assets/IndicePRES
				shaderProperty = _MainTex
				transform = IndicatorL
				transform = IndicatorR
			}

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnviroSensor
				}
				DATA
				{
					sensorType = PRES
				}
			}
		}

		SUBTYPE
		{
			name = GRAV
			title = GRAV (gravity)
			primaryColor = BottleGreen
			secondaryColor = Grey
			descriptionSummary = Sensor GRAV
			descriptionDetail = experiment gravity research
			
			TEXTURE
			{
				texture = PlaneTool/Parts/Pitot/Assets/IndiceGRAV
				shaderProperty = _MainTex
				transform = IndicatorL
				transform = IndicatorR
			}

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnviroSensor
				}
				DATA
				{
					sensorType = GRAV
				}
			}
		}

		SUBTYPE
		{
			name = TEMP
			title = TEMP (heat)
			primaryColor = BrickRed
			secondaryColor = Grey
			descriptionSummary = Sensor TEMP
			descriptionDetail = experiment heat research
			
			TEXTURE
			{
				texture = PlaneTool/Parts/Pitot/Assets/IndiceTEMP
				shaderProperty = _MainTex
				transform = IndicatorL
				transform = IndicatorR
			}

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnviroSensor
				}
				DATA
				{
					sensorType = TEMP
				}
			}
		}
	}

	// switch Flag Left or Right Model (using ksp module)
	MODULE
	{
		name = ModulePartVariants
		baseVariant = LEFT

		VARIANT
		{
			name = LEFT
			displayName = PITOT(Left)
			primaryColor = #3f9b0b
			secondaryColor = #929591
			GAMEOBJECTS
			{
				IndicatorL = false
				IndicatorR = true
			}
		}

		VARIANT
		{
			name = RIGHT
			displayName = PITOT(Right)
			primaryColor = #e50000
			secondaryColor = #929591
			GAMEOBJECTS
			{
				IndicatorL = true
				IndicatorR = false
			}
		}
	}

	// ---- MAIN sensor module ----
	MODULE
	{
		name = ModuleEnviroSensor
		// set by ModuleB9PartSwitch
		sensorType = ACC 
	}	

	// ---- Emissive Anim for heat ----
	MODULE
	{
		name = ModuleAnimateHeat
		ThermalAnim = Pitot_Heat
	}
	
	// ---- Experiment (for all type ACC, PRES, GRAV, TEMP)
	// ---- Not Functional
	//
	MODULE
	{
		name = ModuleCargoPart
		stackableQuantity = 4
		packedVolume = 1
	}
}
//END FILE
